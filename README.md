# Интернет-магазин на Flask

Это простое веб-приложение интернет-магазина, созданное с использованием Flask.

## Маршруты и обработчики

### Публичные маршруты

- `GET /` - Главная страница с каталогом товаров
- `GET /register` - Страница регистрации нового пользователя
- `POST /register` - Обработчик регистрации нового пользователя
- `GET /login` - Страница входа в систему
- `POST /login` - Обработчик входа в систему

### Защищенные маршруты (требуется аутентификация)

- `GET /logout` - Выход из системы
- `GET /add_to_cart/<int:product_id>` - Добавление товара в корзину
- `GET /cart` - Просмотр содержимого корзины
- `GET /checkout` - Оформление заказа и имитация банковского платежа

## Описание обработчиков

### Главная страница (`/`)
Отображает каталог всех доступных товаров. Если пользователь вошел в систему, он может добавлять товары в корзину. Если пользователь не авторизован, отображается кнопка для перехода на страницу входа.

### Регистрация (`/register`)
Позволяет новым пользователям зарегистрироваться в системе. При отправке формы проверяется, что имя пользователя и email еще не заняты. Пароли хранятся в зашифрованном виде.

### Вход в систему (`/login`)
Позволяет зарегистрированным пользователям войти в систему. После успешной аутентификации пользователь перенаправляется на главную страницу.

### Выход из системы (`/logout`)
Завершает сессию пользователя и очищает корзину.

### Добавление в корзину (`/add_to_cart/<int:product_id>`)
Добавляет указанный товар в сессионную корзину пользователя. Если товар уже есть в корзине, увеличивает количество.

### Корзина (`/cart`)
Отображает содержимое корзины пользователя с расчетом общей суммы заказа.

### Оформление заказа (`/checkout`)
Создает новый заказ в базе данных, добавляет все товары из корзины как элементы заказа, обновляет количество товаров на складе и очищает корзину пользователя. Имитирует банковский платеж путем создания записи о заказе в базе данных.

## Модели базы данных

- `User` - Пользователь (имя, email, пароль)
- `Product` - Товар (название, описание, цена, количество на складе)
- `Order` - Заказ (пользователь, общая сумма, статус)
- `OrderItem` - Элемент заказа (заказ, товар, количество, цена)

## Установка и запуск

1. Установите зависимости: `pip install -r requirements.txt`
2. Запустите приложение: `python app.py`
3. Откройте в браузере: `http://localhost:5000`
